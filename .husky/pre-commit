# .husky/pre-commit
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Rodar ESLint
echo "🔍 Running ESLint..."
pnpm lint
if [ $? -ne 0 ]; then
  echo "❌ ESLint falhou. Abortando commit."
  exit 1
fi

# Rodar testes unitários
echo "🧪 Running unit tests..."
pnpm test
if [ $? -ne 0 ]; then
  echo "❌ Testes unitários falharam. Abortando commit."
  exit 1
fi

# Executar ai-commit.mjs
echo "🤖 Executando ai-commit.mjs..."
pnpm cz

echo "✅ Todos os checks passaram. Commit bem-sucedido!"